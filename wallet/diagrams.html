<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Diagrams</title>
<link rel="stylesheet" type="text/css" href="mycss.css">
</head>
<body style="background-color:white;" class="ex1">	
      <ul>
	    <li style="float:right;background:#898989" id="income1" hidden></li>
        <li style="float:right;background:#898989" id="food1" hidden></li>
        <li style="float:right;background:#898989" id="study1" hidden></li>
        <li style="float:right;background:#898989" id="health1" hidden></li>
	    <li style="float:right;background:#898989" id="transport1" hidden></li>
		<li style="float:right"><span style="font-size:35px;cursor:pointer;color:white;" onclick="openNav()">&nbsp;&#9776;&nbsp;</span></li>
        <li style="float:right"><a href="alldiagrams.html"><font size="4" face="Verdana" color="white">All Time</font></a></li>
        <li style="float:right"><a href="yeardiagrams.html"><font size="4" face="Verdana" color="white">Current Year</font></a></li>
        <li style="float:right"><a href="monthdiagrams.html"><font size="4" face="Verdana" color="white">Current Month</font></a></li>
        <li style="float:right;background:#898989"><a href="diagrams.html"><font size="4" face="Verdana" color="white">Today</font></a></li>
        <li ><font size="6"face="Verdana" color="white"><i>Diagrams</i></font></li>
      </ul>
        <br>
        <br>
		 <div id="mySidenav" class="sidenav">
          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
          <a href="home.html"style="color:white;font-family:Verdana">Home</a>
          <a href="income.html"style="color:white;font-family:Verdana">Total Income</a>
          <a href="expense.html"style="color:white;font-family:Verdana">Total Expense</a>
          <a href="balance.html"style="color:white;font-family:Verdana">Balance</a>
          <a href="diagrams.html"style="color:white;font-family:Verdana">Diagrams</a>
		  <a href="addincome.html"style="color:white;font-family:Verdana">Add Income</a>
          <a href="addexpense.html"style="color:white;font-family:Verdana">Add Expense</a>
		  <br>
	   <br>
	   <a href="index.html"style="color:white;font-family:Verdana">Log Out</a>
         </div>                      	 
                        <div id="piechart1" ></div>		 	                      						
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
diagram();
var jsonObj1;
var jsonObj2;
var jsonObj3;
var jsonObj4;
function diagram()
{
    URL1 = "http://localhost:8989/Wallet/getincome1";  //Your URL
	URL2 = "http://localhost:8989/Wallet/getfood1";
	URL3 = "http://localhost:8989/Wallet/gethealth1";
	URL4 = "http://localhost:8989/Wallet/getstudy1";
	URL5 = "http://localhost:8989/Wallet/gettransport1";

    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.open("GET", URL1, false);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.send(null);
    // alert(xmlhttp.responseText);
    jsonObj1= JSON.parse(xmlhttp.responseText);
    document.getElementById("income1").innerHTML =   "Income:    "+jsonObj1.income+".00";
	
	var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.open("GET", URL2, false);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.send(null);
    // alert(xmlhttp.responseText);
    jsonObj2= JSON.parse(xmlhttp.responseText);
    document.getElementById("food1").innerHTML =   "Food:    "+jsonObj2.food+".00";
	
	var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.open("GET", URL3, false);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.send(null);
    // alert(xmlhttp.responseText);
    jsonObj3= JSON.parse(xmlhttp.responseText);
    document.getElementById("health1").innerHTML =   "Health:    "+jsonObj3.health+".00";
	
	var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.open("GET", URL4, false);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.send(null);
    // alert(xmlhttp.responseText);
    jsonObj4= JSON.parse(xmlhttp.responseText);
    document.getElementById("study1").innerHTML =   "Study:    "+jsonObj4.study+".00";
	
	var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.open("GET", URL5, false);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
    xmlhttp.send(null);
    // alert(xmlhttp.responseText);
    jsonObj5= JSON.parse(xmlhttp.responseText);
    document.getElementById("transport1").innerHTML =   "Transport:    "+jsonObj5.transport+".00";
}
function callbackFunction(xmlhttp) 
{
    //alert(xmlhttp.responseXML);
}
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);
function drawChart() {
diagram();
  var data = google.visualization.arrayToDataTable([
  ['Task', 'Spent per Day'],
  ['Salary',jsonObj1.income],
  ['Food', jsonObj2.food],
  ['Health', jsonObj3.health],
  ['Study', jsonObj4.study],
  ['Transport', jsonObj5.transport]
]);
  // Optional; add a title and set the width and height of the chart
  var options = {'title':'Today', 'width':800, 'height':300};
  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart1'));
  chart.draw(data, options);
}
function openNav() {
    document.getElementById("mySidenav").style.width = "340.16px";
    document.getElementById("main").style.marginLeft = "340.16px";
}
function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginLeft= "0";
}
</script>
</body>
</html>